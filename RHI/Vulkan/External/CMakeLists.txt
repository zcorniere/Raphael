set(CMAKE_FOLDER "Raphael/RHI/Vulkan/External")

# Vulkan Header
add_subdirectory(${CMAKE_CURRENT_SOURCE_DIR}/Vulkan-Headers EXCLUDE_FROM_ALL)

# Vulkan Helpers
add_subdirectory(${CMAKE_CURRENT_SOURCE_DIR}/Vulkan-Utility-Libraries EXCLUDE_FROM_ALL)

# vma
set(VMA_STATIC_VULKAN_FUNCTIONS
    OFF
    CACHE BOOL "" FORCE
)
set(VMA_DYNAMIC_VULKAN_FUNCTIONS
    OFF
    CACHE BOOL "" FORCE
)
set(VMA_PATH ${CMAKE_CURRENT_SOURCE_DIR}/VulkanMemoryAllocator)
add_library(VulkanMemoryAllocator EXCLUDE_FROM_ALL STATIC ${VMA_PATH}/include/vk_mem_alloc.h)
set_source_files_properties(${VMA_PATH}/include/vk_mem_alloc.h PROPERTIES LANGUAGE CXX)
target_compile_definitions(
    VulkanMemoryAllocator
    PRIVATE VMA_IMPLEMENTATION
    PUBLIC VMA_STATIC_VULKAN_FUNCTIONS=0
    PUBLIC VMA_DYNAMIC_VULKAN_FUNCTIONS=1
)
target_include_directories(VulkanMemoryAllocator PUBLIC ${VMA_PATH}/include)
set_target_properties(VulkanMemoryAllocator PROPERTIES LINKER_LANGUAGE CXX)
target_link_libraries(VulkanMemoryAllocator PUBLIC Vulkan::Headers)

# SPIRV-Headers
set(SPIRV_HEADERS_SKIP_EXAMPLES
    ON
    CACHE BOOL "" FORCE
)
set(SPIRV_HEADERS_SKIP_INSTALL
    ON
    CACHE BOOL "" FORCE
)
set(SKIP_GLSLANG_INSTALL
    ON
    CACHE BOOL "" FORCE
)
set(ENABLE_GLSLANG_BINARIES
    OFF
    CACHE BOOL "" FORCE
)
set(ENABLE_SPVREMAPPER
    OFF
    CACHE BOOL "" FORCE
)
set(ENABLE_RTTI
    ON
    CACHE BOOL "" FORCE
)
set(ENABLE_OPT
    ON
    CACHE BOOL "" FORCE
)
add_subdirectory(${CMAKE_CURRENT_SOURCE_DIR}/SPIRV-Headers/ EXCLUDE_FROM_ALL)

# SPIRV-Tools
set(SPIRV-Headers_SOURCE_DIR
    "${CMAKE_CURRENT_SOURCE_DIR}/SPIRV-Headers/"
    CACHE STRING "SPIRV-Headers path"
)
set(ENABLE_RTTI
    ON
    CACHE BOOL "" FORCE
)
set(SPIRV_SKIP_TESTS
    ON
    CACHE BOOL "" FORCE
)
set(SKIP_SPIRV_TOOLS_INSTALL
    ON
    CACHE BOOL "" FORCE
)
set(SPIRV_SKIP_EXECUTABLES
    ON
    CACHE BOOL "" FORCE
)
set(SPIRV_WERROR
    OFF
    CACHE BOOL "" FORCE
)
add_subdirectory(${CMAKE_CURRENT_SOURCE_DIR}/SPIRV-Tools EXCLUDE_FROM_ALL)

# glslang
set(ENABLE_CTEST
    OFF
    CACHE BOOL "" FORCE
)
set(BUILD_EXTERNAL
    OFF
    CACHE BOOL "" FORCE
)
set(ENABLE_GLSLANG_BINARIES
    OFF
    CACHE BOOL "" FORCE
)
add_subdirectory(${CMAKE_CURRENT_SOURCE_DIR}/glslang/ EXCLUDE_FROM_ALL)

# shaderc
set(SHADERC_SKIP_TESTS
    ON
    CACHE BOOL "" FORCE
)
set(SHADERC_SKIP_INSTALL
    ON
    CACHE BOOL "" FORCE
)
set(SHADERC_SKIP_EXAMPLES
    ON
    CACHE BOOL "" FORCE
)
set(SHADERC_SKIP_COPYRIGHT_CHECK
    ON
    CACHE BOOL "" FORCE
)
set(SHADERC_ENABLE_SHARED_CRT
    ON
    CACHE BOOL "" FORCE
)
add_subdirectory(${CMAKE_CURRENT_SOURCE_DIR}/shaderc EXCLUDE_FROM_ALL)

# SPIRV-Cross
set(SPIRV_CROSS_EXCEPTIONS_TO_ASSERTIONS
    ON
    CACHE BOOL "" FORCE
)
set(SPIRV_CROSS_ENABLE_TESTS
    OFF
    CACHE BOOL "" FORCE
)
set(SPIRV_CROSS_CLI
    OFF
    CACHE BOOL "" FORCE
)
set(SPIRV_CROSS_ENABLE_GLSL
    ON
    CACHE BOOL "" FORCE
)
set(SPIRV_CROSS_ENABLE_HLSL
    OFF
    CACHE BOOL "" FORCE
)
set(SPIRV_CROSS_ENABLE_MSL
    OFF
    CACHE BOOL "" FORCE
)
set(SPIRV_CROSS_ENABLE_CPP
    OFF
    CACHE BOOL "" FORCE
)
set(SPIRV_CROSS_ENABLE_REFLECT
    OFF
    CACHE BOOL "" FORCE
)
set(SPIRV_CROSS_ENABLE_C_API
    OFF
    CACHE BOOL "" FORCE
)
set(SPIRV_CROSS_ENABLE_UTIL
    OFF
    CACHE BOOL "" FORCE
)
add_subdirectory(${CMAKE_CURRENT_SOURCE_DIR}/SPIRV-Cross EXCLUDE_FROM_ALL)
